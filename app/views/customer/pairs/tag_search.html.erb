<% provide(:title, "検索結果") %>

<div class="row">
  <h2 class="heading text-center">タグが「<%= @tag.name %>」の投稿一覧（全<%= @pairs.count %>件）</h2>
  <div class="col-sm-3 col-12">
    <h2 class="text-center"><strong><u>タグリスト</strong></u></h2>
    <% @tag_list.each do |tag| %>
    <% if tag.pairs.count > 0 %>
    <span class="label label-brown"><%= link_to "#{tag.name}(#{tag.pairs.count})", tag_pairs_path(tag_id: tag.id) %></span>
    <% end %>
    <% end %>
    <div class="text-center col-sm-12 col-12"><%= paginate @tag_list, :param_name => 'tag_page' %></div>
  </div>
  <div class="col-sm-9 col-12">
    <% @pairs.each do |pair| %>
    <div class="col-sm-4 col-6 text-center">
      <%= link_to pair_path(pair) do %>
      <%= attachment_image_tag pair, :image, fallback: "no_image.jpg", class: "pair-image circle" %>
      <h5><%= pair.title %></h5>
      <% if customer_signed_in? %>
      <div>
        <% if pair.liked_by?(current_customer) %>
        <%= link_to pair_likes_path(pair), method: :DELETE do %>
        <i class="fas fa-heart red-heart"><span><%= pair.likes.count %></span></i>
        <% end %>
        <% else %>
        <%= link_to pair_likes_path(pair), method: :POST do %>
        <i class="far fa-heart"><%= pair.likes.count %></i>
        <% end %>
        <% end %>
        <span>/ コメント数：<%= pair.comments.count %></span>
      </div>
      <% end %>
      <% end %>
    </div>
    <% end %>
    <div class="text-center col-sm-12 col-12"><%= paginate @pairs, :param_name => 'pair_page' %></div>
  </div>
</div>